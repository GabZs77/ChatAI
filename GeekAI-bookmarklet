function() {
    const style = document.createElement('style');
    style.textContent = `
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; }
        .floating-window {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            height: 400px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            display: flex;
            flex-direction: column;
        }
        .floating-header {
            background: #f7f7f7;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }
        .close-button {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            border-top: 1px solid #ccc;
        }
        .input-area {
            padding: 10px;
            border-top: 1px solid #ccc;
        }
        .text-input {
            width: calc(100% - 60px);
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .send-button {
            padding: 5px 10px;
            border: none;
            background: #10a37f;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }
    `;
    document.head.appendChild(style);

    const chatContainer = document.createElement('div');
    chatContainer.className = 'floating-window';
    chatContainer.innerHTML = `
        <div class="floating-header">
            <span>Geek AI</span>
            <button class="close-button" onclick="document.body.removeChild(this.parentElement.parentElement)">âœ–</button>
        </div>
        <div class="messages-container" id="messagesArea"></div>
        <div class="input-area">
            <input type="text" class="text-input" id="messageInput" placeholder="Envie uma mensagem..." />
            <button class="send-button" id="sendButton">Enviar</button>
        </div>
    `;
    document.body.appendChild(chatContainer);

    // JavaScript functions
    const messageArea = document.getElementById('messagesArea');
    const input = document.getElementById('messageInput');
    const sendButton = document.getElementById('sendButton');

    sendButton.onclick = function() {
        const message = input.value;
        if (message) {
            const messageDiv = document.createElement('div');
            messageDiv.textContent = message;
            messageArea.appendChild(messageDiv);
            input.value = '';
            messageArea.scrollTop = messageArea.scrollHeight; // Scroll to the bottom
        }
    };

    input.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            sendButton.click();
        }
    });

    // Make the window draggable
    dragElement(chatContainer);

    function dragElement(elmnt) {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        const header = elmnt.getElementsByClassName("floating-header")[0];
        header.onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            e = e || window.event;
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }
})();
